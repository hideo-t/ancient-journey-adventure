<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>古代の秘められた扉: 未知なる旅</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Zen+Kaku+Gothic+New:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-card: #1a1a2e;
      --text-primary: #e0ddd5;
      --text-secondary: #8a8a9a;
      --accent: #4a9eff;
      --accent-dim: #2a5a9a;
      --gold: #c4a35a;
      --chapter-border: #2a2a3e;
      --serif: 'Noto Serif JP', 'Hiragino Mincho ProN', serif;
      --sans: 'Zen Kaku Gothic New', 'Hiragino Kaku Gothic ProN', sans-serif;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: var(--serif);
      font-size: 17px;
      line-height: 1.95;
      min-height: 100vh;
    }

    /* ─── Header ─── */
    .hero {
      position: relative;
      text-align: center;
      padding: 100px 20px 80px;
      background: linear-gradient(180deg, #1a2a4a 0%, #0f1a2f 100%);
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute; inset: 0;
      background: radial-gradient(ellipse at 50% 30%, rgba(120,180,255,0.15) 0%, transparent 70%);
    }
    .hero-title {
      font-family: var(--serif);
      font-size: clamp(1.8rem, 5vw, 3.2rem);
      font-weight: 700;
      letter-spacing: 0.08em;
      color: #ffffff;
      text-shadow: 0 2px 20px rgba(100,160,255,0.3);
      margin-bottom: 12px;
      position: relative;
    }
    .hero-sub {
      font-family: var(--sans);
      font-size: 0.9rem;
      color: #b0c4de;
      letter-spacing: 0.15em;
    }
    .hero-line {
      width: 60px; height: 1px;
      background: var(--gold);
      margin: 28px auto 0;
    }

    /* ─── Digest Carousel ─── */
    .carousel-wrap {
      background: linear-gradient(180deg, #0f1a2f 0%, #0a0e18 100%);
      padding: 24px 0 20px;
      overflow: hidden;
    }
    .carousel-track {
      display: flex;
      gap: 14px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
      padding: 0 calc((100vw - min(85vw, 600px)) / 2);
      scrollbar-width: none;
    }
    .carousel-track::-webkit-scrollbar { display: none; }
    .carousel-slide {
      flex: 0 0 min(85vw, 280px);
      scroll-snap-align: center;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
      text-decoration: none;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      transition: transform 0.2s;
      aspect-ratio: 3/2;
    }
    .carousel-slide:active { transform: scale(0.97); }
    .carousel-slide img {
      width: 100%; height: 100%;
      object-fit: cover;
      display: block;
    }
    .carousel-caption {
      position: absolute;
      bottom: 0; left: 0; right: 0;
      background: linear-gradient(transparent, rgba(0,0,0,0.85));
      padding: 28px 12px 10px;
      color: #fff;
      font-size: 0.85rem;
      font-family: var(--serif);
      line-height: 1.4;
    }
    .carousel-ch {
      display: inline-block;
      font-size: 0.7rem;
      color: var(--gold);
      margin-right: 6px;
      font-family: var(--sans);
      letter-spacing: 0.06em;
    }
    .carousel-dots {
      text-align: center;
      padding-top: 12px;
    }
    .carousel-dot {
      display: inline-block;
      width: 7px; height: 7px;
      border-radius: 50%;
      background: rgba(255,255,255,0.25);
      margin: 0 4px;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
    }
    .carousel-dot.active {
      background: var(--gold);
      transform: scale(1.3);
    }
    @media (min-width: 600px) {
      .carousel-slide { flex: 0 0 280px; }
      .carousel-track { padding: 0 calc((100vw - 900px) / 2); gap: 18px; }
    }

    /* ─── Navigation ─── */
    .nav-bar {
      position: sticky; top: 0; z-index: 100;
      background: rgba(10,10,15,0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--chapter-border);
      padding: 10px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      overflow-x: auto;
      font-family: var(--sans);
      font-size: 0.8rem;
    }
    .nav-bar .nav-title {
      color: var(--gold);
      font-weight: 700;
      white-space: nowrap;
      margin-right: 8px;
    }
    .nav-bar a {
      color: var(--text-secondary);
      text-decoration: none;
      white-space: nowrap;
      padding: 4px 10px;
      border-radius: 4px;
      transition: all 0.2s;
    }
    .nav-bar a:hover {
      color: var(--accent);
      background: rgba(74,158,255,0.1);
    }

    /* ─── TOC ─── */
    .toc {
      max-width: 700px;
      margin: 60px auto 40px;
      padding: 0 20px;
    }
    .toc h3 {
      font-family: var(--sans);
      font-size: 0.75rem;
      letter-spacing: 0.2em;
      color: var(--text-secondary);
      text-transform: uppercase;
      margin-bottom: 20px;
    }
    .toc-item {
      display: flex; align-items: center; gap: 16px;
      padding: 14px 18px;
      color: var(--text-primary);
      text-decoration: none;
      border-left: 2px solid var(--chapter-border);
      transition: all 0.25s;
      font-family: var(--sans);
      font-size: 0.95rem;
    }
    .toc-item:hover {
      border-color: var(--accent);
      background: rgba(74,158,255,0.04);
      padding-left: 24px;
    }
    .toc-num {
      font-size: 0.75rem;
      color: var(--accent-dim);
      font-weight: 700;
      min-width: 20px;
    }

    /* ─── Characters ─── */
    .characters {
      max-width: 700px;
      margin: 40px auto 60px;
      padding: 0 20px;
    }
    .characters h3 {
      font-family: var(--sans);
      font-size: 0.75rem;
      letter-spacing: 0.2em;
      color: var(--text-secondary);
      margin-bottom: 20px;
    }
    .char-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 14px;
    }
    .char-card {
      background: var(--bg-card);
      border: 1px solid var(--chapter-border);
      border-radius: 8px;
      padding: 18px;
    }
    .char-name {
      font-family: var(--sans);
      font-weight: 700;
      font-size: 1rem;
      color: var(--gold);
      margin-bottom: 4px;
    }
    .char-meta {
      font-family: var(--sans);
      font-size: 0.75rem;
      color: var(--accent);
      margin-bottom: 8px;
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .char-meta span {
      background: rgba(74,158,255,0.1);
      padding: 1px 8px;
      border-radius: 4px;
    }
    .char-appearance {
      font-size: 0.82rem;
      color: var(--text-secondary);
      line-height: 1.5;
      margin-bottom: 6px;
      border-left: 2px solid var(--chapter-border);
      padding-left: 10px;
    }
    .char-desc {
      font-size: 0.85rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* ─── Divider ─── */
    .section-divider {
      width: 40px; height: 1px;
      background: var(--chapter-border);
      margin: 0 auto;
    }

    /* ─── Chapter ─── */
    .chapter {
      max-width: 700px;
      margin: 0 auto;
      padding: 80px 20px;
      border-top: 1px solid var(--chapter-border);
    }
    .chapter-header {
      text-align: center;
      margin-bottom: 48px;
    }
    .chapter-number {
      font-family: var(--sans);
      font-size: 0.7rem;
      letter-spacing: 0.25em;
      color: var(--accent-dim);
      display: block;
      margin-bottom: 8px;
    }
    .chapter-title {
      font-family: var(--serif);
      font-size: clamp(1.3rem, 3vw, 1.8rem);
      font-weight: 700;
      letter-spacing: 0.05em;
    }
    .chapter-image {
      margin: 0 -20px 40px;
      border-radius: 6px;
      overflow: hidden;
      border: 1px solid var(--chapter-border);
    }
    .chapter-image img {
      width: 100%;
      height: auto;
      display: block;
      opacity: 0.92;
    }
    .chapter-body p {
      margin-bottom: 1.2em;
      text-indent: 1em;
      text-align: justify;
    }
    .chapter-body p:empty {
      display: none;
    }

    /* ─── Footer ─── */
    .footer {
      text-align: center;
      padding: 60px 20px;
      font-family: var(--sans);
      font-size: 0.75rem;
      color: var(--text-secondary);
      border-top: 1px solid var(--chapter-border);
    }

    /* ─── Reading mode toggle ─── */
    .mode-toggle {
      position: fixed; bottom: 20px; right: 20px; z-index: 200;
      background: var(--bg-card);
      border: 1px solid var(--chapter-border);
      color: var(--text-secondary);
      font-family: var(--sans);
      font-size: 0.75rem;
      padding: 8px 14px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .mode-toggle:hover {
      border-color: var(--accent);
      color: var(--accent);
    }



    /* ─── Light mode ─── */
    body.light {
      --bg-primary: #f5f0e8;
      --bg-secondary: #ebe5d9;
      --bg-card: #fff;
      --text-primary: #2a2a2a;
      --text-secondary: #6a6a6a;
      --chapter-border: #d5cfc3;
      --accent: #2563eb;
      --accent-dim: #6b9eff;
      --gold: #8a6d2b;
    }

    /* ─── Responsive ─── */
    @media (max-width: 600px) {
      body { font-size: 15px; }
      .chapter { padding: 50px 16px; }
    }

    /* ─── Scroll progress ─── */
    .scroll-progress {
      position: fixed; top: 0; left: 0; z-index: 200;
      height: 2px;
      background: linear-gradient(90deg, var(--accent), var(--gold));
      width: 0%;
      transition: width 0.1s;
    }
  </style>
</head>
<body>
  <div class="scroll-progress" id="progress"></div>

  <header class="hero">
    <h1 class="hero-title">古代の秘められた扉: 未知なる旅</h1>
    <p class="hero-sub">GENERATED WITH LOCAL AI — LOCAL LLM + STABLE DIFFUSION</p>
    <div class="hero-line"></div>
  </header>

  <nav class="nav-bar">
    <span class="nav-title">目次</span>
    <a href="#chapter-1">第1章</a><a href="#chapter-2">第2章</a><a href="#chapter-3">第3章</a><a href="#chapter-4">第4章</a><a href="#chapter-5">第5章</a>
  </nav>

  <div class="toc">
    <h3>— 目次 —</h3>
        <a href="#chapter-1" class="toc-item"><span class="toc-num">1</span><span class="toc-label">影の旅人</span></a>
        <a href="#chapter-2" class="toc-item"><span class="toc-num">2</span><span class="toc-label">時の歪み</span></a>
        <a href="#chapter-3" class="toc-item"><span class="toc-num">3</span><span class="toc-label">古代の声</span></a>
        <a href="#chapter-4" class="toc-item"><span class="toc-num">4</span><span class="toc-label">選択の瞬間</span></a>
        <a href="#chapter-5" class="toc-item"><span class="toc-num">5</span><span class="toc-label">未知なる未来</span></a>
  </div>

  <div class="characters">
    <h3>— 登場人物 —</h3>
    <div class="char-grid">
      <div class="char-card">
        <div class="char-name">エルウィン</div>
        <div class="char-meta"><span>主人公</span><span>22歳</span></div>
        <div class="char-appearance">黒いローブに銀色の刺青が走り、鋭い瞳は過去の記憶を宿す。長い銀髪を三つ編みにし、常に杖を携える。その表情には静かな決意と不安が共存する。</div>
        <div class="char-desc">謎めき, 知的, 内向的</div>
      </div>
      <div class="char-card">
        <div class="char-name">カイ</div>
        <div class="char-meta"><span>サブキャラ</span><span>19歳</span></div>
        <div class="char-appearance">薄茶色の髪を短く刈り、緑の瞳に優しさを宿す。赤いマントを翻し、剣を腰に下げる。常に仲間を気にかける柔らかな笑みが特徴。</div>
        <div class="char-desc">優しい, 忠実, 行動的</div>
      </div>
    </div>
  </div>

  <div class="section-divider"></div>

  <main>

    <section class="chapter" id="chapter-1">
      <div class="chapter-header">
        <span class="chapter-number">第1章</span>
        <h2 class="chapter-title">影の旅人</h2>
      </div>
      
      <div class="chapter-body">
        <p>第1章　影の旅人</p>

        <p>薄明かりが森を包む。風が松の葉を撫で、湿った土の臭いが鼻腔を刺激する。エルウィンは杖を地面に打ち付け、歩調を緩めた。夜の訪れを感じさせる静けさが、彼の足音を消した。銀髪の三つ編みが肩に垂れ、銀色の刺青が薄らと光る。  </p>

        <p>石碑は木々の合間に鎮座し、苔に覆われた表面に刻まれた文字が風化していた。エルウィンは指で一つの記号をなぞり、冷たい石肌が指紋を残す。記号は青白い光を発し、周囲の木々が一瞬、影を伸ばす。彼は息を止め、耳を澄ます。遠くでオオカミの遠吠えが響き、森の奥から何かが動く気配がする。  </p>

        <p>彼は杖を地面に突き立て、魔法の力を解き放つ。銀の光が石碑を包み込み、記号が浮かび上がる。エルウィンは目を閉じ、過去の記憶を呼び覚ます。幼い頃、母が語った「闇の森に住む獣」の話が蘇る。その獣は光を吸い込み、時間を歪ませる力を持っていた。  </p>

        <p>突然、影が動く。森の奥から黒いシルエットが現れ、地面に足跡を刻む。エルウィンは杖を振り上げ、しかし獣は動じない。銀髪の獣は目だけを上げ、青い光を放ちながらエルウィンを見つめる。彼は息を詰め、涙をこらえる。  </p>

        <p>記憶の断片が断続的に訪れる。母の声「エルウィン、この先には危険なものがいるのよ」の言葉。森の奥で見た、星空に浮かぶ不思議な形。彼は杖を地面に打ち付け、力を解き放つ。銀の光が獣の周りを回り、時間がゆっくりと流れ始める。  </p>

        <p>獣はゆっくりと近づき、エルウィンの肩に触れる。冷たい肌が体温を奪い、記憶の断片が一つ消える。彼は目を開け、森の奥を指差す。石碑の記号が新たな形に変化し、風が葉を鳴らす。エルウィンは杖を握りしめ、歩みを進める。  </p>

        <p>暗闇が迫る中、彼は一歩踏み出す。銀髪の獣は後ろ髪を引かれるように消え、森の空気が変わる。彼は石碑の前で立ち止まり、記号をもう一度なぞる。風が彼の髪をなで、松の香りが鼻腔を刺激する。何かが彼を呼んでいる。  </p>

        <p>森は静かに彼を迎え入れる。空気は冷たく、足元の土は湿っている。彼は杖を地面に打ち付け、次の一歩を踏み出す。</p>
      </div>
    </section>
    <section class="chapter" id="chapter-2">
      <div class="chapter-header">
        <span class="chapter-number">第2章</span>
        <h2 class="chapter-title">時の歪み</h2>
      </div>
      
      <div class="chapter-body">
        <p>第2章　時の歪み</p>

        <p>薄明かりに浮かぶ樹皮は、風に揺れる度に細かい粉塵を舞わせる。空気は鋭い冷たさを含み、木の根元から立ち昇る湿気の臭いが鼻腔を刺激する。石畳に刻まれた刻印は、陽の射す方向を誤り、影が不規則に伸びる。地面を踏みしめる足音は、遠くで断続的に響き、静寂を破る。</p>

        <p>カイは杖を地面に突き立て、その先に現れた亀裂の奥を覗き込む。青白い閃光が彼の瞳を焼き、一瞬、幼い日の自分が木の実を拾う姿が浮かぶ。亀裂から漏れる音は、時を刻む鐘のような低音と、枯れ枝が折れる断続的なカサカサ音が交錯する。彼は杖を引き抜き、その先端を亀裂の縁に押し当てる。冷たい光が指先を撫で、銀色の刺青が微かに輝く。</p>

        <p>亀裂の端からは、微細な粒子が舞い散り、風に乗って森の奥へ消える。カイは息を止め、周囲の音を遮断する。遠くで鳥の鳴き声が聞こえ、その調子が次第に高らかになり、やがて鐘の音と重なる。彼は杖を地面に突き立て、体を低くする。亀裂の深さは腰まで達し、その先は闇に包まれ、光が滲むように波打つ。</p>

        <p>亀裂の中央に、幾何学的な記号が浮かび上がり、静かに脈打つ。その光は彼の手を包み込み、体温を奪う。彼は反射的に手を引くが、光は手を離さず、代わりに指先から微かな熱を奪い、代わりに冷たい刺激を伝える。その感覚は、母が残した手書きの警告文を思い出させる。文字は消えゆき、代わりに暗闇が広がる。</p>

        <p>彼は杖を振り上げ、記号に向かって一語を発する。「時は…」。言葉は亀裂に吸収され、代わりに風が耳元で囁く。その音は、遠い過去の自分が「時は…」。同じ声が重なり、カイはその声を認めながら、胸に手を当てる。冷たい空気が肺を満たし、心臓の鼓動が速まる。</p>

        <p>亀裂の端からは、光の粒子が舞い、空気を彩る。その粒子は、木の葉が舞い散るような柔らかさを持ち、風に乗って散りゆく。カイは杖を地面に突き立て、体を低く保ちながら、周囲の変化を観察する。空気の温度は上昇し、風は弱まり、森の木々が静かに揺れ始める。その揺れは、時間の流れが変化していることを示す。</p>

        <p>彼は杖を手から離し、代わりに手の平を空に開く。光の粒子が手の平に集まり、ゆっくりと円を描く。その動きは、過去の自分が木の実を摘む動作を模倣する。カイはその円を描きながら、静かに息を吐く。粒子は消えゆき、代わりに静寂が戻る。</p>

        <p>周囲の空気は再び冷たくなり、風が再び吹き始める。カイは杖を地面に突き立て、体を低く保ちながら、次の一歩を踏み出す。亀裂の端からは、微かな光が漏れ、森の奥へと消えていく。彼はその光を追わず、代わりに前方の道を歩み始める。</p>

        <p>遠くで鳥の鳴き声が再び響き、その調子は次第に高らかになり、やがて鐘の音と重なる。彼は杖を地面に突き立て、体を低く保ちながら、次の一歩を踏み出す。亀裂の端からは、微かな光が漏れ、森の奥へと消えていく。彼はその光を追わず、代わりに前方の道を歩み始める。</p>
      </div>
    </section>
    <section class="chapter" id="chapter-3">
      <div class="chapter-header">
        <span class="chapter-number">第3章</span>
        <h2 class="chapter-title">古代の声</h2>
      </div>
      
      <div class="chapter-body">
        <p>第3章　古代の声</p>

        <p>朝もやが洞窟の入り口を覆い、月明かりが石畳を銀色に染める。石の冷たさが足裏を貫き、風の囁きが骨を撫でる。エルウィンはローブの袖で目を覆い、杖を地面に静かに置く。銀髪が微かに揺れるたび、銀色の刺青が月光に反射する。洞窟内は湿気で息が詰まり、水滴が石壁を叩く音が耳の奥まで響く。鼻腔をくすぐる古びた鉄の臭いが、時間の重さを物語る。</p>

        <p>足音が止まり、エルウィンは息を呑む。闇が広がる先に、何かが立っている。その背中は石壁に寄りかかり、赤い光が脈打つように輝く。エルウィンは杖を手に取り、息を整える。手のひらに伝わる石の温度が、体温より低い。何かが動く。ゆっくりと、守護者が姿を現す。肌は冷えた銀の板のように滑らかで、目は深い青に光る。エルウィンが一歩進むと、守護者は振り返り、口を開く。</p>

        <p>「エルウィン…」</p>
        <p>エルウィンが杖を地面に突き刺す。石が裂け、水が滝のように流れる。守護者の手が伸び、エルウィンの肩に触れる。その感触は氷のように冷たく、しかし温もりを含んでいる。エルウィンは息を吐き、目を見開く。</p>

        <p>「真の目的…」</p>
        <p>守護者が言葉を続ける。声は風に乗り、洞窟の奥まで届く。エルウィンは杖を握りしめ、視線を外さない。石壁に刻まれた文字が、月光に浮かび上がる。それらは物語を語り、過去と未来をつなぐ。エルウィンは腕を上げ、空に手を伸ばす。指先が光に触れると、石碑が光り、新たな試練が始まる。</p>

        <p>「選ばれし者は、時間の断層を越えよ」</p>
        <p>エルウィンが口元に笑みを浮かべる。その表情は暗く、しかし確かな決意に満ちている。守護者は杖を地面に置き、静かに消える。洞窟が微かに震え、空気が動く。エルウィンは杖を持ち、歩き出す。足元の石が、何かを告げるように光る。月の光が石畳を照らし、旅が続いていく。</p>
      </div>
    </section>
    <section class="chapter" id="chapter-4">
      <div class="chapter-header">
        <span class="chapter-number">第4章</span>
        <h2 class="chapter-title">選択の瞬間</h2>
      </div>
      
      <div class="chapter-body">
        <p>第4章　選択の瞬間  </p>

        <p>朝もやが石畳を覆い、銀色の刺青が月光に粒々と光る。エルウィンは杖を地に突き立て、氷のように冷たい水が足元から湧き上がるのを感じる。空気は重く、古代の息吹が喉元でこみ上げてくる。  </p>

        <p>二つの道が目の前に分かれる。左は樹皮が緑青に覆われ、細い光が地面から這い上がる。風が通り抜けるたび、鈴の音が耳元で揺れる。匂いは金属と草の混じったもの。右は枯れた枝が風に煽られ、地面からは硫黄の臭いが漂う。空気は乾いており、足元の石が砂塵を舞い上げる。  </p>

        <p>エルウィンは左の道へ足をかけようとした。しかし刹那、右側から影が忍び寄る。カイの手が肩に触れ、その温もりが背筋を走る。彼は振り向くと、カイが静かに微笑み、剣を地に突き立てる。その刃先は光を宿し、空気を切り裂く。  </p>

        <p>「どちらを選ぶかは、君の心に聞け」  </p>
        <p>カイの声は風に消され、代わりに石碑が光る。エルウィンは杖を地に打ちつけ、水の流れが道を照らす。左の道は光に満ち、右は闇に飲み込まれる。彼の指先が左の道に触れると、冷たい水が唇に触れる。右へ手を伸ばすと、砂塵が肌を焼く。  </p>

        <p>時間が凍る。エルウィンは一歩を踏み出し、左の道へ。しかし、カイの目が瞬き、剣の光が一瞬、右の道を照らす。石碑が「選ばれし者は、時間の断層を越えよ」と繰り返す。  </p>

        <p>風が止み、静寂が広がる。エルウィンは刺青を押さえ、心臓が耳鳴るのを感じる。道の先には、巨大な扉が待つ。その鍵穴は、二つの道の記憶を宿している。</p>
      </div>
    </section>
    <section class="chapter" id="chapter-5">
      <div class="chapter-header">
        <span class="chapter-number">第5章</span>
        <h2 class="chapter-title">未知なる未来</h2>
      </div>
      
      <div class="chapter-body">
        <p>第5章　未知なる未来  </p>

        <p>朝靄が古代の遺跡を包み込み、湿った大理石の上に水滴が揺れる。薄らと差し込む光は、石碑の彫刻を青白く浮かび上がらせ、その奥から温もりを感じさせる。エルウィンは杖を地面に立て、銀髪が風に翻るたびに銀糸が空を縫う。石碑の一つが静かに光を放ち、その振動が足下から響く。彼は膝を折り、指先で刻印をなぞる。  </p>

        <p>カイは赤いマントを翻し、風の冷たさに耐える。目の前で光る石碑に、彼の緑の瞳が静かに動く。遠くで水が岩を打つ音がリズムを刻み、その波紋が空気を揺らす。エルウィンの呼吸が深く、ゆっくりと。杖の先に灰色の粒子が集まり、やがて浮遊する。  </p>

        <p>光の柱が地面を貫き、その先に暗い闇が広がる。エルウィンは立ち上がり、その闇に手を伸ばす。粒子が彼の掌に集まり、温もりを伝える。カイの肩が彼の肩に触れ、赤いマントが二人の間を覆う。石碑の光が移動し、空に色を塗り始める。紫がまず現れ、次第に青へと移り変わり、最後に金が差し込む。  </p>

        <p>その光が全天を包み、風が止む。エルウィンの足元に新たな地面が現れ、柔らかな草が生える。彼は立ち上がり、その地を踏む。カイは手を差し出し、エルウィンの手を取る。二人はその場で立ち止まり、光の中を眺める。  </p>

        <p>新たな空が広がり、星が瞬く。その光が二人の影を長く伸ばし、遠くへと導く。エルウィンの瞳に涙が滲む。彼はカイの手を握り、静かに息を吐く。  </p>

        <p>先の見えない道が二人の前に広がる。風が再び吹き、マントが翻る。エルウィンの足が動き、カイの背中を押す。  </p>

        <p>光が消え、静けさが戻る。二人は歩みを進める。その先に何があるか、誰も知らない。</p>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>古代の秘められた扉: 未知なる旅</p>
    <p>Generated locally with Local LLM + Stable Diffusion</p>
  </footer>


  </button>

  <button class="mode-toggle" onclick="toggleMode()">🌗 表示切替</button>

  <script>
    // Reading mode
    function toggleMode() {
      document.body.classList.toggle('light');
    }
    if (localStorage.getItem('mode') === 'light') document.body.classList.add('light');

    // Scroll progress
    window.addEventListener('scroll', () => {
      const h = document.documentElement;
      const pct = (h.scrollTop / (h.scrollHeight - h.clientHeight)) * 100;
      document.getElementById('progress').style.width = pct + '%';
    });

    // === TTS (Web Speech API) ===

    document.querySelectorAll('.chapter').forEach((sec, i) => {
      const b = sec.querySelector('.chapter-body');
      const t = sec.querySelector('.chapter-title');
        title: t ? t.textContent : ('Ch.' + (i+1)),
        text: b.textContent.trim(), el: sec
      });
    });

      if (!synth) { alert('Speech not supported'); return; }
      const sy = window.scrollY + window.innerHeight / 3;
      let cl = 0;
    }

      synth.cancel();
      ch.el.scrollIntoView({ behavior: 'smooth', block: 'start' });

      // Split by Japanese sentence endings for reliable playback
      const sents = ch.text.match(/[^。！？
]+[。！？]?/g) || [ch.text];
      let si = 0;

      function next() {
        if (si >= sents.length) {
          return;
        }
        const vs = synth.getVoices();
        const jv = vs.find(v => v.lang && v.lang.startsWith('ja'));
        if (jv) u.voice = jv;
        u.onend = () => { si++; next(); };
        u.onerror = () => { si++; next(); };
        synth.speak(u);
      }
      next();
    }

      } else {
      }
    }

    }

      document.getElementById('ttsSpeedVal').textContent = v + 'x';
    }
    if (synth) synth.onvoiceschanged = () => synth.getVoices();

    /* ─── Carousel ─── */
    (function() {
      const track = document.getElementById('carouselTrack');
      if (!track) return;
      const dots = track.parentElement.querySelectorAll('.carousel-dot');
      const slides = track.querySelectorAll('.carousel-slide');
      if (slides.length < 1) return;
      function updateDots() {
        const sw = slides[0].offsetWidth + 14;
        const idx = Math.round(track.scrollLeft / sw);
        dots.forEach((d, i) => d.classList.toggle('active', i === idx));
      }
      track.addEventListener('scroll', updateDots, { passive: true });
      dots.forEach(d => d.addEventListener('click', () => {
        const sw = slides[0].offsetWidth + 14;
        track.scrollTo({ left: parseInt(d.dataset.idx) * sw, behavior: 'smooth' });
      }));
      let paused = false, timer = setInterval(() => {
        if (paused) return;
        const sw = slides[0].offsetWidth + 14;
        const mx = track.scrollWidth - track.clientWidth;
        const nx = track.scrollLeft + sw;
        track.scrollTo({ left: nx > mx ? 0 : nx, behavior: 'smooth' });
      }, 4000);
      track.addEventListener('touchstart', () => { paused = true; clearInterval(timer); }, { passive: true });
      track.addEventListener('touchend', () => {
        paused = false;
        timer = setInterval(() => {
          if (paused) return;
          const sw = slides[0].offsetWidth + 14;
          const mx = track.scrollWidth - track.clientWidth;
          const nx = track.scrollLeft + sw;
          track.scrollTo({ left: nx > mx ? 0 : nx, behavior: 'smooth' });
        }, 4000);
      }, { passive: true });
    })();

  </script>
</body>
</html>